# WEU AI Agent Platform

Веб-платформа для работы с AI-агентами: чат с разными моделями, RAG, воркфлоу, задачи, пароли, серверы — всё в одном месте.

---

## Что это и для кого

Единый веб-интерфейс, где можно общаться с AI (Gemini, Grok), подключать базу знаний, запускать агентов по сценариям и вести задачи. Удобно командам, которые уже используют LLM и хотят не размазывать всё по скриптам, а собрать в один рабочий стол: чат, оркестратор, агенты, таски, доступ к серверам и паролям из одного аккаунта.

---

## Что внутри

**Чат и модели**  
Один чат, переключение провайдеров (Gemini / Grok) и моделей. RAG включается кнопкой — ответы опираются на загруженные документы. Модели и ключи настраиваются в интерфейсе и через `.env`.

**Оркестратор**  
Экран с цепочкой «мысль → действие → ответ»: видно, какие инструменты вызываются, что отвечает модель. Подходит и для отладки сценариев, и для демо.

**Агенты и воркфлоу**  
Профили агентов (модель, RAG, тип агента), проекты как рабочие папки и воркфлоу — сценарии из нескольких шагов. Запуск и Cursor CLI, и Ralph из браузера; логи и статусы по запускам в одном разделе.

**База знаний (RAG)**  
Загрузка файлов и текста, поиск по ним при включённом RAG в чате. Бэкенд — Qdrant (Docker) или InMemory, если не хочешь поднимать векторную БД.

**Задачи**  
Приоритеты, метки, комментарии, вложения, подзадачи. Есть AI: анализ формулировки, улучшение описания, разбиение на подзадачи. К задачам можно привязать обсуждение в чате.

**Пароли и серверы**  
Пароли — шифрование AES-256, категории, генератор. Серверы — SSH-хосты, группы, проверка подключения и выполнение команд. Удобно держать рядом с агентами и задачами, без отдельных инструментов.

**Инструменты агентов**  
Файловая система, SSH на серверы, веб-запросы и скрапинг. Всё это доступно оркестратору и внешним рантаймам (Cursor, Ralph).

**MCP**  
Клиент Model Context Protocol — можно подключать внешние тулы через `mcp_config.json` (filesystem, postgres и т.п.), если нужно расширять агентов.

---

## Зачем так делать

- **Один вход** — логин в веб, дальше чат, агенты, задачи, пароли, серверы без переключения между сервисами.
- **Гибкость моделей** — смена провайдера и модели без правки кода, всё через UI и конфиг.
- **RAG по желанию** — включил в чате, загрузил документы — ответы уже с опорой на твои данные.
- **Воркфлоу из коробки** — многошаговые сценарии, запуск Cursor/Ralph, просмотр логов и остановка из интерфейса.
- **Задачи с AI** — не только трекер, но и помощь по формулировкам и разбиению на шаги.
- **Без лишней инфраструктуры** — SQLite, опционально Docker только для Qdrant. Для старта хватает `pip install` и двух ключей в `.env`.

---

## Быстрый старт

**Требования:** Python 3.10+, при желании Docker для Qdrant.

```bash
git clone https://github.com/LLprod39/WEU-AI.git
cd WEU-AI
python -m venv venv
# Windows: venv\Scripts\activate
# Linux/macOS: source venv/bin/activate
pip install -r requirements.txt
```

В корне создай `.env`:

```env
GEMINI_API_KEY=your_gemini_key
GROK_API_KEY=your_grok_key
```

Миграции и пользователь:

```bash
python manage.py migrate
python manage.py createsuperuser
```

Запуск:

```bash
python manage.py runserver
```

Открой `http://127.0.0.1:8000`, залогинься под созданным пользователем — дальше чат, разделы в боковой панели и онбординг при первом заходе (один раз, потом не грузит).

Подробнее: [QUICK_START.md](QUICK_START.md).

---

## Что куда ставить

| Раздел           | Назначение |
|------------------|------------|
| **Chat**         | Чат, выбор провайдера/модели, RAG, загрузка файлов |
| **Orchestrator** | Цепочка ReAct и вызовы инструментов |
| **Knowledge Base** | Документы для RAG |
| **Agents**       | Профили, проекты, воркфлоу, запуски |
| **Tasks**        | Задачи, приоритеты, метки, AI-помощник |
| **Servers**      | SSH-хосты, группы, команды |
| **Passwords**    | Пароли, категории, генератор |
| **Settings**     | Провайдер по умолчанию, модели, ключи (часть — в `.env`) |

---

## Конфиг и переменные

Основное — в `.env`: `GEMINI_API_KEY`, `GROK_API_KEY`. По желанию: `DJANGO_PORT`, `NICEGUI_PORT`, `CLI_RUNTIME_TIMEOUT_SECONDS`, `CURSOR_CLI_PATH`, `RALPH_CLI_PATH`.

Для Cursor CLI из-под прокси/ограничений по HTTP/2 можно включить режим HTTP/1 в настройках Django: `CURSOR_CLI_HTTP_1=1` (по умолчанию уже включён), подробности в `web_ui/settings.py`.

Модели для чата и агентов задаются в Settings и при первом выборе сохраняются в `.model_config.json`.

---

## Документация в репо

- [QUICK_START.md](QUICK_START.md) — установка и первый запуск  
- [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) — структура каталогов  
- [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) — как устроен выбор моделей и оркестрация  
- [docs/UI_GUIDE.md](docs/UI_GUIDE.md) — интерфейс и настройки моделей  

---

## Ограничения (честно)

- История чата не персистится между перезапусками сервера.
- RAG общий на всех пользователей, без изоляции по юзерам.
- В интерфейсе местами смешение русского и английского.

Если что-то ломается или неочевидно — лучше открыть Issue: так проще и тебе, и тем, кто будет подключаться потом.

---

## Лицензия и контрибьюция

Лицензия и правила контрибьюции — уточняются. Исходный код открыт для ознакомления и доработок под свои процессы.
