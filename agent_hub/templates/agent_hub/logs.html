{% extends 'base.html' %}
{% load static %}

{% block body_extra_class %}page-agent-logs{% endblock %}
{% block title %}Logs - WEU AI{% endblock %}
{% block header_title %}Logs{% endblock %}
{% block breadcrumbs %}
<nav aria-label="Breadcrumb" class="flex items-center gap-2 text-sm min-w-0">
    <ol class="flex items-center gap-2 list-none flex-wrap" itemscope itemtype="https://schema.org/BreadcrumbList">
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="flex items-center gap-2">
            <a href="{% url 'index' %}" class="text-gray-500 hover:text-white transition-colors" itemprop="item"><span itemprop="name">Home</span></a>
            <meta itemprop="position" content="1">
            <span class="text-gray-600" aria-hidden="true">/</span>
        </li>
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="flex items-center gap-2">
            <a href="{% url 'agent_hub:agents_page' %}" class="text-gray-500 hover:text-white transition-colors" itemprop="item"><span itemprop="name">Agents</span></a>
            <meta itemprop="position" content="2">
            <span class="text-gray-600" aria-hidden="true">/</span>
        </li>
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="flex items-center gap-2" aria-current="page">
            <span class="font-medium text-white" itemprop="name">Logs</span>
            <meta itemprop="position" content="3">
        </li>
    </ol>
</nav>
{% endblock %}

{% block content %}
<div class="agent-hub agent-logs-page min-h-screen p-6 pb-20" data-run-type="{{ run_type }}" data-run-id="{{ run_id }}">
    <div class="glass-card rounded-2xl p-4 border border-white/10 mb-4">
        <div class="flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between">
            <div class="min-w-0">
                <div class="text-xs text-gray-400">–ò—Å—Ç–æ—á–Ω–∏–∫</div>
                <div class="text-lg text-white font-semibold truncate" id="logsPageTitle">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="text-xs text-gray-500 mt-1" id="logsPageMeta">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</div>
            </div>
            <div class="flex flex-wrap gap-2 items-center">
                <div id="logsStatusBadge" class="log-status-badge">–û–∂–∏–¥–∞–Ω–∏–µ</div>
                <button type="button" id="logsAutoScrollToggle" class="btn-ghost">–ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª: –í–∫–ª</button>
                <button type="button" id="logsRefreshBtn" class="btn-ghost">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 xl:grid-cols-3 gap-4">
        <div class="xl:col-span-2 flex flex-col gap-4">
            <div class="glass-card rounded-2xl p-4 border border-white/10">
                <div class="flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between mb-3">
                    <div class="flex flex-wrap items-center gap-2">
                        <div class="log-filter-chip active" data-filter="all">–í—Å–µ</div>
                        <div class="log-filter-chip" data-filter="assistant">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</div>
                        <div class="log-filter-chip" data-filter="tool_call">üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div>
                        <div class="log-filter-chip" data-filter="step">‚úÖ –®–∞–≥–∏</div>
                        <div class="log-filter-chip" data-filter="cmd">üñ•Ô∏è –ö–æ–º–∞–Ω–¥—ã</div>
                        <div class="log-filter-chip" data-filter="error">‚ö†Ô∏è –û—à–∏–±–∫–∏</div>
                    </div>
                    <div class="flex flex-wrap gap-2 items-center">
                        <div class="log-search">
                            <input id="logsSearchInput" type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º..." />
                        </div>
                        <button type="button" id="logsCopyAll" class="btn-ghost">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë</button>
                    </div>
                </div>
                <div id="logsTimeline" class="log-timeline"></div>
                <div id="logsEmptyState" class="log-empty-state hidden">
                    <div class="text-gray-400 text-sm">–õ–æ–≥–∏ –ø–æ–∫–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª–∏.</div>
                </div>
            </div>
        </div>
        <div class="xl:col-span-1 flex flex-col gap-4">
            <div class="glass-card rounded-2xl p-4 border border-white/10">
                <div class="flex items-center justify-between mb-3">
                    <div class="text-sm font-semibold text-white">–°—Ö–µ–º–∞ —à–∞–≥–æ–≤</div>
                    <div class="text-xs text-gray-500" id="logsFlowMeta">‚Äî</div>
                </div>
                <div id="logsFlow" class="log-flow"></div>
            </div>
            <div class="glass-card rounded-2xl p-4 border border-white/10">
                <div class="text-sm font-semibold text-white mb-2">–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</div>
                <div id="logsDetails" class="log-details">
                    <div class="text-gray-500 text-sm">–í—ã–±–µ—Ä–∏ —Å–æ–±—ã—Ç–∏–µ –≤ –ª–µ–Ω—Ç–µ.</div>
                </div>
            </div>
            <div class="glass-card rounded-2xl p-4 border border-white/10">
                <div class="flex items-center justify-between mb-2">
                    <div class="text-sm font-semibold text-white">Raw log</div>
                    <button type="button" id="logsRawToggle" class="btn-ghost">–ü–æ–∫–∞–∑–∞—Ç—å</button>
                </div>
                <pre id="logsRawContent" class="log-raw hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</pre>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/logs_page.js' %}"></script>
{% endblock %}
