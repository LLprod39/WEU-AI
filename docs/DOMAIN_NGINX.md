# Домен не открывается (по IP работает, по домену — нет)

Если **http://188.137.241.228/** открывается, а **http://weuai.site/** выдаёт «The content of the page cannot be displayed», причина — Django не принимает запросы с заголовком `Host: weuai.site` (ALLOWED_HOSTS).

---

## Только Docker (без nginx)

Когда на сервере только контейнер и запросы идут сразу в него, нужно, чтобы в контейнере работал актуальный код и разрешён домен.

**На сервере сделай:**

1. **Обнови код и перезапусти контейнер:**

```bash
cd /путь/к/проекту
git pull
docker compose restart web
```

В коде уже заданы по умолчанию: `weuai.site`, `www.weuai.site`, `188.137.241.228`. После `git pull` и перезапуска они подхватятся.

2. **Проверь `.env` на сервере** (он не в репо — при автодеплое с коммитами он не обновляется). Если там есть `ALLOWED_HOSTS=...` и в значении нет домена — Django будет принимать только указанный хост (например только IP). Добавь или замени на:

```env
ALLOWED_HOSTS=*
```

Сохрани файл **на сервере** и перезапусти контейнер.

3. Перезапуск после правки `.env`:

```bash
docker compose restart web
```

После этого **http://weuai.site/** и **http://www.weuai.site/** должны открываться так же, как по IP.

---

## Если перед контейнером стоит Nginx

Когда запросы идут через nginx (порт 80 слушает nginx, он проксирует в контейнер), в конфиге nginx в том блоке `server`, где есть `proxy_pass` на приложение, в **server_name** нужно указать домен:

```nginx
server_name weuai.site www.weuai.site 188.137.241.228;
```

Потом: `sudo nginx -t && sudo systemctl reload nginx`. Пример полного конфига: `docs/nginx-weuai.site.conf.example`.
