{
  "name": "3D Terraria-like Browser Game",
  "runtime": "ralph",
  "description": "Пошаговые задачи для ИИ: создать 3D игру в стиле Terraria (песочница, крафт, строительство, исследование) в браузере на WebGL/Three.js.",
  "steps": [
    {
      "title": "Старт проекта и рендер",
      "prompt": "Создай минимальный веб-проект (Vite + TypeScript) с Three.js. Подключи канвас на всю страницу, добавь сцену, камеру (перспективную), освещение (ambient + directional). Реализуй базовый игровой цикл requestAnimationFrame и отрисовку пустой сцены. В консоли не должно быть ошибок, сцена должна отображаться.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: открывается ли страница, есть ли 3D-сцена с освещением, нет ли ошибок в консоли.",
      "verify_promise": "PASS",
      "max_iterations": 3
    },
    {
      "title": "Воксельный/блочный мир",
      "prompt": "Добавь генерацию мира из блоков (воксели): чанки или бесконечная плоскость из кубов. Используй простой шум (Perlin/Simplex) или случайную высоту для рельефа. Блоки — Mesh (BoxGeometry) с разными материалами по типу (земля, трава, камень, песок). Мир должен генерироваться вокруг игрока (ленивая подгрузка чанков или фиксированная область). Оптимизируй: объединяй невидимые грани или используй InstancedMesh для однотипных блоков.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: отображается ли блочный ландшафт, есть ли разные типы блоков, нет ли сильных лагов при движении.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Игрок и камера от первого лица",
      "prompt": "Реализуй игрока: камера = глаза игрока. Управление WASD (ходьба), мышь (поворот взгляда), пробел — прыжок. Добавь простую физику: гравитация, коллизия с блоками (не проваливаться сквозь землю, не проходить сквозь стены). Можно использовать простой AABB-коллайдер без тяжёлой физической библиотеки. Ограничь высоту прыжка и скорость движения.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: ходит ли игрок по миру, не проваливается ли сквозь блоки, поворачивается ли камера мышью.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Выбор блока и рейкаст",
      "prompt": "Добавь рейкаст от камеры в центр экрана (Raycaster в Three.js). По клику мыши: если попали в блок — определи, какой блок и какая грань. Отображай контур выбранного блока (например, тонкий wireframe или подсветка грани). Выводи в UI или консоль координаты и тип выбранного блока.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: при наведении и клике определяется ли блок под прицелом, видна ли подсветка выбранного блока.",
      "verify_promise": "PASS",
      "max_iterations": 3
    },
    {
      "title": "Разрушение и установка блоков",
      "prompt": "По клику ЛКМ — разрушить выбранный блок (удалить из мира/чанка, обновить меш). По клику ПКМ — поставить новый блок на смежную грань выбранного блока (на 1 шаг от выбранной грани). Тип ставящегося блока — из текущего выбранного слота (пока один тип, например земля или камень). Обновляй геометрию чанка или пересоздавай меш только для изменённого чанка.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: ЛКМ убирает блок, ПКМ ставит блок рядом с выбранной гранью, мир обновляется без ошибок.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Инвентарь и горячие слоты",
      "prompt": "Добавь инвентарь: 9 горячих слотов (полоска внизу экрана). В слотах — типы блоков (земля, камень, трава, доски, песок и т.д.). Переключение слотов — клавиши 1–9 или колёсико мыши. При установке блока (ПКМ) используется блок из активного слота. При разрушении блока — блок добавляется в инвентарь (в первый свободный слот или в слот с таким же типом, лимит стека например 64). Простой UI: иконки/названия блоков и количество.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: переключаются ли слоты, ставится ли блок выбранного типа, при копании блок попадает в инвентарь.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Крафт (базовый)",
      "prompt": "Добавь простое меню крафта: по клавише E открывается окно с рецептами. Рецепты — список «что можно скрафтить» из предметов в инвентаре (например: доски из дерева, верстак из досок, кирка из палок и камня). При выборе рецепта проверь наличие ресурсов, отними их и добавь результат в инвентарь. Минимум 5–7 рецептов в стиле Terraria/Minecraft.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: открывается ли меню крафта, можно ли скрафтить предмет при наличии ресурсов, результат появляется в инвентаре.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Враги и урон игроку",
      "prompt": "Добавь простых мобов: 1–2 типа (например, зомби и слизень). Они спавнятся в мире на поверхности или в пещерах, двигаются к игроку (A* или простой подход к координатам). При касании игрока — наносят урон. У игрока есть здоровье (полоска HP в UI). При HP = 0 — респавн в начальной точке или экран «смерть» с кнопкой респавна. Мобов можно атаковать (ближняя атака по ЛКМ по мобу или рейкаст) — у моба есть HP, при 0 — исчезает, дроп (опционально).",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: мобы двигаются, наносят урон, игрок может их убить, отображается здоровье и смерть/респавн.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "День/ночь и освещение",
      "prompt": "Добавь цикл день/ночь: солнце (directional light) движется по небу, цвет неба и интенсивность света меняются (день — ярко, ночь — темно, можно добавить звёзды/луну). Длительность цикла — например 5–10 минут игрового времени. В пещерах и под землёй — темнее (учитывай высоту или «крышу» из блоков над головой). Опционально: ручные источники света (факел как блок или объект).",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: время суток меняется, ночью темнее, освещение влияет на сцену.",
      "verify_promise": "PASS",
      "max_iterations": 4
    },
    {
      "title": "Сохранение и загрузка мира",
      "prompt": "Реализуй сохранение мира и игрока: по клавише (например S) или авто-сохранение раз в N минут — сохранять в localStorage (или IndexedDB для больших данных) позицию игрока, инвентарь, здоровье и все изменённые блоки мира (координаты + тип). При загрузке страницы — предлагать «Продолжить» или «Новый мир». При «Продолжить» — восстановить мир и игрока из сохранения.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: после сохранения и перезагрузки страницы мир и инвентарь восстанавливаются.",
      "verify_promise": "PASS",
      "max_iterations": 5
    },
    {
      "title": "Полировка и дебаг",
      "prompt": "Сделай полный дебаг/отладку проекта: всё должно работать «из коробки» после сборки (npm run build + раздача статики). Проверь граничные случаи: копание на границе чанков, респавн в блоке, переполнение инвентаря. Добавь простое меню паузы (ESC), отображение FPS или отладочной информации (по желанию). Убери лишние console.log, обработай типичные ошибки загрузки. Игра должна стабильно запускаться в современном браузере.",
      "completion_promise": "STEP_DONE",
      "verify_prompt": "Проверь: сборка без ошибок, игра запускается, сохранение/загрузка и боевка работают стабильно.",
      "verify_promise": "PASS",
      "max_iterations": 5
    }
  ]
}
